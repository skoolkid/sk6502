<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at $2FB6</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../theme.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="2F8C.html">$2F8C</a>
</td>
<td class="up">Up: <a href="../maps/all.html#2FB6">Map</a></td>
<td class="next">
Next: <a href="3012.html">$3012</a>
</td>
</tr>
</table>
<div class="description">$2FB6: Move a column of screen tiles left or right</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="3072.html">$3072</a> and <a href="3113.html">$3113</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">(<a href="004D.html#004E">$4E,$4F</a>)</td>
<td class="register-desc">Source screen bitmap address</td>
</tr>
<tr>
<td class="register">(<a href="004D.html#0050">$50,$51</a>)</td>
<td class="register-desc">Source colour information address</td>
</tr>
<tr>
<td class="register">(<a href="004D.html#0052">$52,$53</a>)</td>
<td class="register-desc">Destination screen bitmap address</td>
</tr>
<tr>
<td class="register">(<a href="004D.html#0054">$54</a>)</td>
<td class="register-desc">Source colour information index</td>
</tr>
<tr>
<td class="register">(<a href="004D.html#0055">$55</a>)</td>
<td class="register-desc">Destination colour information index</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="2FB6"></span>$2FB6</td>
<td class="instruction">LDX #$15</td>
<td class="comment-1" rowspan="1">There are 21 screen rows to shift.</td>
</tr>
<tr>
<td class="address-2"><span id="2FB8"></span>$2FB8</td>
<td class="instruction">LDY #$00</td>
<td class="comment-1" rowspan="1">Initialise the index.</td>
</tr>
<tr>
<td class="address-1"><span id="2FBA"></span>$2FBA</td>
<td class="instruction">LDA ($4E),Y</td>
<td class="comment-1" rowspan="23">Copy the eight bytes of the source tile to the destination tile.</td>
</tr>
<tr>
<td class="address-1"><span id="2FBC"></span>$2FBC</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FBE"></span>$2FBE</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FBF"></span>$2FBF</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FC1"></span>$2FC1</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FC3"></span>$2FC3</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FC4"></span>$2FC4</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FC6"></span>$2FC6</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FC8"></span>$2FC8</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FC9"></span>$2FC9</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FCB"></span>$2FCB</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FCD"></span>$2FCD</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FCE"></span>$2FCE</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FD0"></span>$2FD0</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FD2"></span>$2FD2</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FD3"></span>$2FD3</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FD5"></span>$2FD5</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FD7"></span>$2FD7</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FD8"></span>$2FD8</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FDA"></span>$2FDA</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FDC"></span>$2FDC</td>
<td class="instruction">INY</td>
</tr>
<tr>
<td class="address-1"><span id="2FDD"></span>$2FDD</td>
<td class="instruction">LDA ($4E),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FDF"></span>$2FDF</td>
<td class="instruction">STA ($52),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FE1"></span>$2FE1</td>
<td class="instruction">LDY $54</td>
<td class="comment-1" rowspan="4">Copy the colour information of the source tile to the destination tile.</td>
</tr>
<tr>
<td class="address-1"><span id="2FE3"></span>$2FE3</td>
<td class="instruction">LDA ($50),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FE5"></span>$2FE5</td>
<td class="instruction">LDY $55</td>
</tr>
<tr>
<td class="address-1"><span id="2FE7"></span>$2FE7</td>
<td class="instruction">STA ($50),Y</td>
</tr>
<tr>
<td class="address-1"><span id="2FE9"></span>$2FE9</td>
<td class="instruction">LDA $4E</td>
<td class="comment-1" rowspan="7">Add 320 (40x8) to the source screen bitmap address at <a href="004D.html#004E">$4E</a>. Now it points at the adjacent tile in the row below.</td>
</tr>
<tr>
<td class="address-1"><span id="2FEB"></span>$2FEB</td>
<td class="instruction">INC $4F</td>
</tr>
<tr>
<td class="address-1"><span id="2FED"></span>$2FED</td>
<td class="instruction">CLC</td>
</tr>
<tr>
<td class="address-1"><span id="2FEE"></span>$2FEE</td>
<td class="instruction">ADC #$40</td>
</tr>
<tr>
<td class="address-1"><span id="2FF0"></span>$2FF0</td>
<td class="instruction">BCC <a href="2FB6.html#2FF4">$2FF4</a></td>
</tr>
<tr>
<td class="address-1"><span id="2FF2"></span>$2FF2</td>
<td class="instruction">INC $4F</td>
</tr>
<tr>
<td class="address-2"><span id="2FF4"></span>$2FF4</td>
<td class="instruction">STA $4E</td>
</tr>
<tr>
<td class="address-1"><span id="2FF6"></span>$2FF6</td>
<td class="instruction">LDA $52</td>
<td class="comment-1" rowspan="7">Add 320 (40x8) to the destination screen bitmap address at <a href="004D.html#0052">$52</a>. Now it points at the adjacent tile in the row below.</td>
</tr>
<tr>
<td class="address-1"><span id="2FF8"></span>$2FF8</td>
<td class="instruction">INC $53</td>
</tr>
<tr>
<td class="address-1"><span id="2FFA"></span>$2FFA</td>
<td class="instruction">CLC</td>
</tr>
<tr>
<td class="address-1"><span id="2FFB"></span>$2FFB</td>
<td class="instruction">ADC #$40</td>
</tr>
<tr>
<td class="address-1"><span id="2FFD"></span>$2FFD</td>
<td class="instruction">BCC <a href="2FB6.html#3001">$3001</a></td>
</tr>
<tr>
<td class="address-1"><span id="2FFF"></span>$2FFF</td>
<td class="instruction">INC $53</td>
</tr>
<tr>
<td class="address-2"><span id="3001"></span>$3001</td>
<td class="instruction">STA $52</td>
</tr>
<tr>
<td class="address-1"><span id="3003"></span>$3003</td>
<td class="instruction">LDA $50</td>
<td class="comment-1" rowspan="6">Add 40 to the source colour information address at <a href="004D.html#0050">$50</a>. Now it points at the adjacent tile in the row below.</td>
</tr>
<tr>
<td class="address-1"><span id="3005"></span>$3005</td>
<td class="instruction">CLC</td>
</tr>
<tr>
<td class="address-1"><span id="3006"></span>$3006</td>
<td class="instruction">ADC #$28</td>
</tr>
<tr>
<td class="address-1"><span id="3008"></span>$3008</td>
<td class="instruction">BCC <a href="2FB6.html#300C">$300C</a></td>
</tr>
<tr>
<td class="address-1"><span id="300A"></span>$300A</td>
<td class="instruction">INC $51</td>
</tr>
<tr>
<td class="address-2"><span id="300C"></span>$300C</td>
<td class="instruction">STA $50</td>
</tr>
<tr>
<td class="address-1"><span id="300E"></span>$300E</td>
<td class="instruction">DEX</td>
<td class="comment-1" rowspan="1">Next screen row.</td>
</tr>
<tr>
<td class="address-1"><span id="300F"></span>$300F</td>
<td class="instruction">BNE <a href="2FB6.html#2FB8">$2FB8</a></td>
<td class="comment-1" rowspan="1">Branch back until all 21 rows are done.</td>
</tr>
<tr>
<td class="address-1"><span id="3011"></span>$3011</td>
<td class="instruction">RTS</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="2F8C.html">$2F8C</a>
</td>
<td class="up">Up: <a href="../maps/all.html#2FB6">Map</a></td>
<td class="next">
Next: <a href="3012.html">$3012</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze C64 disassembly 20210325</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2021 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.4 and <a href="https://github.com/skoolkid/sk6502">sk6502</a>.</div>
</footer>
</body>
</html>