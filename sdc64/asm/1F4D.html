<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at $1F4D</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../theme.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="1F4C.html">$1F4C</a>
</td>
<td class="up">Up: <a href="../maps/all.html#1F4D">Map</a></td>
<td class="next">
Next: <a href="1F77.html">$1F77</a>
</td>
</tr>
</table>
<div class="description">$1F4D: Control EINSTEIN during class</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This corresponds to <a href="https://skoolkid.github.io/skooldaze/asm/79BA.html">$79BA</a> in the ZX Spectrum version.
</div>
<div class="paragraph">
Used by command lists <a href="410D.html">$90</a>, <a href="4150.html">$98</a>, <a href="4193.html">$A0</a> and <a href="41D6.html">$A8</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="1F4D"></span>$1F4D</td>
<td class="instruction">LDA #$03</td>
<td class="comment-1" rowspan="1">Event <a href="4400.html">$03</a>: EINSTEIN is speaking.</td>
</tr>
<tr>
<td class="address-1"><span id="1F4F"></span>$1F4F</td>
<td class="instruction">JSR <a href="31D2.html">$31D2</a></td>
<td class="comment-1" rowspan="1">Is EINSTEIN still speaking?</td>
</tr>
<tr>
<td class="address-1"><span id="1F52"></span>$1F52</td>
<td class="instruction">BCC <a href="1F4D.html#1F6E">$1F6E</a></td>
<td class="comment-1" rowspan="1">Branch if not.</td>
</tr>
<tr>
<td class="address-1"><span id="1F54"></span>$1F54</td>
<td class="instruction">LDA $3F</td>
<td class="comment-1" rowspan="4">Reset bit 3 (EINSTEIN is not waiting to answer a question) and set bit 2 (EINSTEIN is speaking) and bit 6 (always move EINSTEIN on his turn in the routine at <a href="3B5E.html">$3B5E</a>) in the flags byte at <a href="003F.html">$3F</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="1F56"></span>$1F56</td>
<td class="instruction">AND #$80</td>
</tr>
<tr>
<td class="address-1"><span id="1F58"></span>$1F58</td>
<td class="instruction">ORA #$44</td>
</tr>
<tr>
<td class="address-1"><span id="1F5A"></span>$1F5A</td>
<td class="instruction">STA $3F</td>
</tr>
<tr>
<td class="address-1"><span id="1F5C"></span>$1F5C</td>
<td class="instruction">JSR <a href="1F77.html">$1F77</a></td>
<td class="comment-1" rowspan="2">Place the address of the interruptible subcommand routine at <a href="2387.html">$2387</a> into EINSTEIN's buffer and jump to it.</td>
</tr>
<tr>
<td class="address-1"><span id="1F5F"></span>$1F5F</td>
<td class="instruction">.WORD <a href="2387.html">$2387</a></td>
</tr>
<tr>
<td class="address-1"><span id="1F61"></span>$1F61</td>
<td class="instruction">LDA #$03</td>
<td class="comment-1" rowspan="1">Event <a href="4400.html">$03</a>: EINSTEIN is speaking.</td>
</tr>
<tr>
<td class="address-1"><span id="1F63"></span>$1F63</td>
<td class="instruction">JSR <a href="31C4.html">$31C4</a></td>
<td class="comment-1" rowspan="1">Lower the signal for this event.</td>
</tr>
<tr>
<td class="address-1"><span id="1F66"></span>$1F66</td>
<td class="instruction">LDA #$4D</td>
<td class="comment-1" rowspan="4">Place the address of this routine into EINSTEIN's buffer as the primary command routine address.</td>
</tr>
<tr>
<td class="address-1"><span id="1F68"></span>$1F68</td>
<td class="instruction">STA $29</td>
</tr>
<tr>
<td class="address-1"><span id="1F6A"></span>$1F6A</td>
<td class="instruction">LDA #$1F</td>
</tr>
<tr>
<td class="address-1"><span id="1F6C"></span>$1F6C</td>
<td class="instruction">STA $2A</td>
</tr>
<tr>
<td class="address-2"><span id="1F6E"></span>$1F6E</td>
<td class="instruction">LDA $3F</td>
<td class="comment-1" rowspan="4">Reset bit 2 (EINSTEIN is not speaking) and set bits 3 (EINSTEIN is waiting to answer a question) and 6 (always move EINSTEIN on his turn in the routine at <a href="3B5E.html">$3B5E</a>) in the flags byte at <a href="003F.html">$3F</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="1F70"></span>$1F70</td>
<td class="instruction">AND #$80</td>
</tr>
<tr>
<td class="address-1"><span id="1F72"></span>$1F72</td>
<td class="instruction">ORA #$48</td>
</tr>
<tr>
<td class="address-1"><span id="1F74"></span>$1F74</td>
<td class="instruction">STA $3F</td>
</tr>
<tr>
<td class="address-1"><span id="1F76"></span>$1F76</td>
<td class="instruction">RTS</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="1F4C.html">$1F4C</a>
</td>
<td class="up">Up: <a href="../maps/all.html#1F4D">Map</a></td>
<td class="next">
Next: <a href="1F77.html">$1F77</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2021 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.3 and <a href="https://github.com/skoolkid/sk6502">sk6502</a>.</div>
</footer>
</body>
</html>